// the semi-colon before function invocation is a safety net against concatenated
// scripts and/or other plugins which may not be closed properly.
!function(e,t,n,i){"use strict";e.fn.timeline=function(t,n){!t instanceof Array&&(t=[]);var i=e.extend({slide:1,events_per_slide:6,event_template:'<li class="timeline__events__event"><div class="event"><div class="event__date">####DATE###</div><div class="event__content">####CONTENT###</div></div></li>',navigation:{prev:"prev",next:"next"}},n),a=function(t,n){var a=i.event_template;a=a.replace("####DATE###",t.date),a=a.replace("####CONTENT###",t.content);var s=100/(i.events_per_slide-1)*n;return e(a).css("left",s+"%")};return this.each(function(){var n=this,s=e(this),l=i.slide-1;s.data({events:t,settings:i,currentSlide:l}).addClass("timeline");var r=function(){s.removeClass("timeline--initialized"),s.find(".timeline__events").remove(),s.find(".timeline__navigation").remove()},v=function(){var t=s.data("currentSlide"),i=s.data("settings"),l=s.data("events");e("<ol/>",{"class":"timeline__events"}).append(l.slice(t*i.events_per_slide,(t+1)*i.events_per_slide).map(a)).appendTo(n)},d=function(){var a=s.data("currentSlide"),l=function(n){switch(n){case"prev":if(a>0)return e('<li><a href="#" class="'+n+'">'+i.navigation[n]+"</a></li>");break;case"next":if((a+1)*i.events_per_slide<t.length)return e('<li><a href="#" class="'+n+'">'+i.navigation[n]+"</a></li>")}return e("<li></li>")};e("<ul/>",{"class":"timeline__navigation"}).append(Object.keys(i.navigation).map(l)).appendTo(n)},c=function(){r(),v(),d(),setTimeout(function(){s.addClass("timeline--initialized")},100)};c(),e("body").on("click",".timeline .timeline__navigation a",function(n){if(n.preventDefault(),e(this).hasClass("prev")){var a=s.data("currentSlide");if(a<1)return!1;s.data({events:t,settings:i,currentSlide:a-1}),c()}else{var a=s.data("currentSlide");if((a+1)*i.events_per_slide>=t.length)return!1;s.data({events:t,settings:i,currentSlide:a+1}),c()}})})}}(jQuery,window,document);