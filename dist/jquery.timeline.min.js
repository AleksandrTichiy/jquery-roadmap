// the semi-colon before function invocation is a safety net against concatenated
// scripts and/or other plugins which may not be closed properly.
!function(e,t,n,i){"use strict";e.fn.timeline=function(t,n){!t instanceof Array&&(t=[]);var i=e.extend({slide:1,eventsPerSlide:6,eventTemplate:'<li class="timeline__events__event"><div class="event"><div class="event__date">####DATE###</div><div class="event__content">####CONTENT###</div></div></li>',prevArrow:"prev",nextArrow:"next"},n),a=function(t,n){var a=i.eventTemplate;a=a.replace("####DATE###",t.date),a=a.replace("####CONTENT###",t.content);var r=100/(i.eventsPerSlide-1)*n;return e(a).css("left",r+"%")};return this.each(function(){var n=this,r=e(this),s=i.slide-1;r.data({events:t,settings:i,currentSlide:s}).addClass("timeline");var l=function(){r.removeClass("timeline--initialized"),r.find(".timeline__events").remove(),r.find(".timeline__navigation").remove()},d=function(){var t=r.data("currentSlide"),i=r.data("settings"),s=r.data("events");e("<ol/>",{"class":"timeline__events"}).append(s.slice(t*i.eventsPerSlide,(t+1)*i.eventsPerSlide).map(a)).appendTo(n)},v=function(){var a=r.data("currentSlide"),s=function(n){switch(n){case"prev":if(a>0)return e('<li><a href="#" class="'+n+'">'+i.prevArrow+"</a></li>");break;case"next":if((a+1)*i.eventsPerSlide<t.length)return e('<li><a href="#" class="'+n+'">'+i.nextArrow+"</a></li>")}return e("<li></li>")};e("<ul/>",{"class":"timeline__navigation"}).append(["prev","next"].map(s)).appendTo(n)},c=function(){l(),d(),v(),setTimeout(function(){r.addClass("timeline--initialized")},100)};c(),e("body").on("click",".timeline .timeline__navigation li > *",function(n){if(n.preventDefault(),e(this).hasClass("prev")){var a=r.data("currentSlide");if(a<1)return!1;r.data({events:t,settings:i,currentSlide:a-1}),c()}else{var a=r.data("currentSlide");if((a+1)*i.eventsPerSlide>=t.length)return!1;r.data({events:t,settings:i,currentSlide:a+1}),c()}})})}}(jQuery,window,document);